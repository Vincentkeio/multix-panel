<template x-for="(n, sid) in sortedAgents" :key="sid">
    <div x-show="!n.hidden"
         @click="openDrawer(sid)"
         class="relative group glass p-6 rounded-[2rem] border border-white/5 hover:border-blue-500/30 transition-all duration-500 cursor-pointer overflow-hidden"
         x-transition:enter="transition ease-out duration-300"
         x-transition:enter-start="opacity-0 scale-95"
         x-transition:enter-end="opacity-100 scale-100">
        
        <div class="absolute -right-8 -top-8 w-24 h-24 rounded-full blur-3xl opacity-20 transition-colors duration-500"
             :class="n.status === 'online' ? 'bg-green-500' : 'bg-red-500'"></div>

        <div class="flex justify-between items-start mb-6">
            <div class="flex items-center gap-3">
                <div class="w-2 h-2 rounded-full relative">
                    <div class="absolute inset-0 rounded-full animate-ping opacity-75"
                         :class="n.status === 'online' ? 'bg-green-500' : 'bg-red-500'"></div>
                    <div class="relative w-2 h-2 rounded-full"
                         :class="n.status === 'online' ? 'bg-green-500' : 'bg-red-500'"></div>
                </div>
                <div>
                    <h3 class="text-sm font-black italic uppercase tracking-tighter text-white group-hover:text-blue-400 transition" 
                        x-text="n.alias || n.hostname"></h3>
                    <p class="text-[8px] text-slate-500 font-mono tracking-tighter" x-text="sid"></p>
                </div>
            </div>
            <template x-if="n.is_demo">
                <span class="text-[7px] px-1.5 py-0.5 bg-blue-500/10 text-blue-400 rounded border border-blue-500/20 font-bold uppercase italic">Demo</span>
            </template>
        </div>

        <div class="space-y-4">
            <div class="space-y-1.5">
                <div class="flex justify-between text-[8px] font-black uppercase tracking-widest text-slate-500">
                    <span>Processing Unit</span>
                    <span class="text-white font-mono" x-text="n.metrics.cpu + '%'"></span>
                </div>
                <div class="h-1 bg-white/5 rounded-full overflow-hidden">
                    <div class="h-full bg-blue-500 transition-all duration-1000" 
                         :style="'width: ' + n.metrics.cpu + '%'"></div>
                </div>
            </div>

            <div class="space-y-1.5">
                <div class="flex justify-between text-[8px] font-black uppercase tracking-widest text-slate-500">
                    <span>Physical Memory</span>
                    <span class="text-white font-mono" x-text="n.metrics.mem + '%'"></span>
                </div>
                <div class="h-1 bg-white/5 rounded-full overflow-hidden">
                    <div class="h-full bg-purple-500 transition-all duration-1000" 
                         :style="'width: ' + n.metrics.mem + '%'"></div>
                </div>
            </div>
        </div>

        <div class="mt-6 pt-4 border-t border-white/5 flex justify-between items-center opacity-40 group-hover:opacity-100 transition">
            <div class="flex gap-3">
                <div class="flex flex-col">
                    <span class="text-[6px] uppercase font-bold text-slate-500">Up</span>
                    <span class="text-[9px] font-mono text-white" x-text="(n.metrics.net_up || 0) + ' Mb'"></span>
                </div>
                <div class="flex flex-col">
                    <span class="text-[6px] uppercase font-bold text-slate-500">Down</span>
                    <span class="text-[9px] font-mono text-white" x-text="(n.metrics.net_down || 0) + ' Mb'"></span>
                </div>
            </div>
            <i class="ri-arrow-right-up-line text-slate-500 group-hover:text-blue-500 transition"></i>
        </div>
    </div>
</template>
